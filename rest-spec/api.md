# Rest module
# Описание запросов к веб-сервису
## начальный вариант документации

Веб-сервис предоставляет данные по заданным URL. 
Префикс для всех url состоит из имени домена + api (colmen.lenteam.org/api/)

  1. 	Стандартные вызовы для пользователя:
   
  2. 	Стандартные вызовы для администратора:
    * 	Администратору, помимо своих, доступные все типы вызовов пользователя к веб-сервису.

  3. Поддержка форматов:
    *   JSON
    
## Стандартные вызовы для пользователя

**Получить общую статистику для всех персон по сайту:**
```
Запрос: GET /stat/persons/{site_id}
    site_id : Long - идентификатор сайта

Результат:
    [
        {"id":1, "name":"Путин", "rank":"23"},
        {"id":2, "name":"Медведев", "rank":"18"},
        {"id":3, "name":"Навальный", "rank":"10"}
    ]
```

**Получить ежедневную статистику для конкретной персоны по сайту:**
```
Запрос: GET /stat/persons/daily/{person_id}/{site_id}/{from_date/{to_date}

    person_id : Long- идентификатор персоны
    site_id  : Long - идентификатор сайта
    first_date : Date (или String) - идентификатор дата начала периода
    last_date  : Date (или String) - идентификатор дата конца периода
    
	Без указания дат, вернет статистику за последние 30 дней.
	Формат даты: dd.mm.YYYY

Результат:
    [
        "pagesByDays":[
            {"date":"01.08.2016", "pages":"2"},
            {"date":"02.08.2016", "pages":"0"},
            {"date":"03.08.2016", "pages":"1"},
            {"date":"04.08.2016", "pages":"3"},
            {"date":"05.08.2016", "pages":"0"}
        ],
        "totalPages":"6"
    ]
```

## Стандартные вызовы для администратора

**Получить список сайтов:**
```
Запрос: GET /sites

Результат:
    [
        {"id":1, "name":"1tv.ru"},
        {"id":2, "name":"lenta.ru"},
        {"id":3, "name":"gazeta.ru"}
    ]
```

**Получить список персон:**
```
Запрос: GET /persons

Результат:
    [
        {"id":1, "name":"Путин"},
        {"id":2, "name":"Медведев"},
        {"id":3, "name":"Навальный"}
    ]
```

**Получить список ключевых слов:**
```
Запрос: GET /keywords/{person_id}
    person_id : Long - идентификатор персоны, если не указан, вернет ключевые слова для всех персон

Результат:
    [
        {"id":1, "name":"путин", "person_id":"1"},
        {"id":2, "name":"путина", "person_id":"1"},
        {"id":3, "name":"путину", "person_id":"1"},
    ]
```

**Добавить сайт:**
```
Запрос: POST /sites
Параметры: name
    name : String - имя сайта
```

**Добавить персону:**
```
Запрос: POST /persons
Параметры: name
    name : String - имя персоны
```

**Добавить ключевое слово:**
```
Запрос: POST /keywords/{key}/{person_id}
Параметры: key, person_id
    key : String    - ключевое слово
	person_id : Long - идентификатор персоны
```

**Удалить сайт:**
```
Запрос: DELETE /sites/{id}
```

**Удалить персону:**
```
Запрос: DELETE /persons/{id}
```

**Удалить ключевое слово:**
```
Запрос: DELETE /keywords/{id}
```

**Получить список пользователей:**
```
Запрос: GET /users

Результат:
    [
        {"id":1, "login":"admin", "role":"1"},
        {"id":2, "login":"guest", "role":"0"}
    ]
```

**Удалить пользователя:**
```
Запрос: DELETE /users/{id}
```

Коды ошибок:
    400 Keyword already exists
        Record not exists
        Site already exists
        Identifier not specified
        Parameter "parameter-name" not specified
        Person not found
    403 Allowed for administrator only